<div class="app-container">
  <!-- Header/Navbar - only shown when authenticated -->
  <header *ngIf="isAuthenticated" class="navbar">
    <div class="navbar-brand">
      <h1>{{ title }}</h1>
    </div>

    <!-- Project Selector -->
    <div class="project-selector" *ngIf="projects.length > 0">
      <label for="project-select">Project:</label>
      <select
        id="project-select"
        [value]="selectedProject?.id"
        (change)="onProjectChange($event)"
        class="project-dropdown">
        <option *ngFor="let project of projects" [value]="project.id">
          {{ project.name }}
        </option>
      </select>
    </div>

    <nav class="navbar-menu">
      <a routerLink="/dashboard" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸ“Š</i>
        Dashboard
      </a>
      <a routerLink="/backlog" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸ“‹</i>
        Backlog
      </a>
      <a routerLink="/sprints" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸƒ</i>
        Sprints
      </a>
      <a routerLink="/board" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸ“Œ</i>
        Sprint Board
      </a>
      <a routerLink="/scrum-events" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸ“</i>
        Scrum Events
      </a>
      <a routerLink="/impediments" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸš§</i>
        Impediments
      </a>
      <a routerLink="/reports" routerLinkActive="active" class="nav-link">
        <i class="icon">ğŸ“ˆ</i>
        Reports
      </a>
    </nav>

    <div class="navbar-user">
      <!-- Notifications -->
      <app-notifications></app-notifications>

      <!-- User Profile -->
      <div class="user-profile">
        <div class="user-info">
          <span class="user-name">{{ currentUser?.firstName }} {{ currentUser?.lastName }}</span>
          <span class="user-role">
            <span *ngIf="isProductOwner()">Product Owner</span>
            <span *ngIf="isScrumMaster()"> â€¢ Scrum Master</span>
            <span *ngIf="isDeveloper()"> â€¢ Developer</span>
          </span>
        </div>
        <div class="user-avatar">
          {{ currentUser?.firstName?.charAt(0) }}{{ currentUser?.lastName?.charAt(0) }}
        </div>
      </div>

      <!-- Logout Button -->
      <button class="btn-logout" (click)="logout()" title="Logout">
        <i class="icon">ğŸšª</i>
        Logout
      </button>
    </div>
  </header>

  <!-- Main Content Area -->
  <main class="main-content" [class.full-height]="!isAuthenticated">
    <router-outlet />
  </main>
</div>
